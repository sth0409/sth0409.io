<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>

<body>

<link rel="stylesheet" href="./node_modules/zx-editor/dist/css/zx-editor.min.css">
<div id="editorContainer">
  <!-- 编辑器容器 -->
</div>
<script src="./node_modules/imgfile2base64/index.js"></script>
<script src="./node_modules/zx-editor/dist/js/zx-editor.min.js"></script>
<script>
  // 初始化ZX编辑器
  var zxEditor = new ZxEditor('#editorContainer', {
    editable: true,
    // placeholder: '自定义placeholder',
    // lineHeight: 1,
    // padding: '0 0 30px',
    // placeholderColor: 'red',
    toolbarHeight:200,
    cursorColor: 'red',
    // 禁用图片自动处理
     customPictureHandler: true
  })
  //
  zxEditor.on('selectPictureInputChange', function (file, ze, e) {
    console.log(file)
    var imageOptions = Object.assign({}, zxEditor.options, {
      width: zxEditor.options.imageMaxWidth
    });

    imgfile2base64(file, function (base64) {
      var u = navigator.userAgent.toLowerCase();
      var isApple = /(iphone|ipad|ipod|ios)/i.test(u);
      var isAndroid = /android/i.test(u);

      console.log(base64)
      if(isApple) {
        window.webkit.messageHandlers.printPic.postMessage(base64);
      } else {
        Jzyp.printPic(base64)
      }
    })

    });



  function upPicSuccess(url) {
    let img = new Image()
    img.src = url
    zxEditor.insertElm(img)
  }


  function gethtml() {
    var u = navigator.userAgent.toLowerCase();
    var isApple = /(iphone|ipad|ipod|ios)/i.test(u);
    var isAndroid = /android/i.test(u);
    if(isApple) {
      window.webkit.messageHandlers.printHtml.postMessage(zxEditor.getHtml());
    } else {
      Jzyp.printHtml(zxEditor.getHtml())
    }
  }
</script>
</body>

</html>
